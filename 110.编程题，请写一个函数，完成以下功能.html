<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>编程题，请写一个函数，完成以下功能</title>
</head>
<body>
    <pre>
        输入 '1, 2, 3, 5, 7, 8, 10' 输出 '1~3, 5, 7~8, 10'
    </pre>
</body>
</html>
<script>
    function fn(arr) {
        arr = [].concat(arr)
        arr = Array.from(new Set(arr)).sort((a, b) => a - b)
        let result = []
        for (let i = 0, length = arr.length; i < length; i++) {
            let item = arr[i],
                last = result[result.length - 1]

            if (!last) result.push(item)
            else {
                let lastArr = last.toString().split('~')
                if ((lastArr[lastArr.length - 1] * 1 + 1) == item) {
                    result[result.length - 1] = lastArr[0] + '~' + item
                } else result.push(item)
            }
        }
        return result.join(',')
    }

    console.log(fn([1,2,3,5,7,8,10]));
    console.log(fn([1,2,3,4,5,6,7,8,10]));
    
</script>